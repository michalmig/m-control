# m-control Development Rules

## Project Context

- Personal CLI toolset (orchestrator + polyglot tools)
- TypeScript for orchestrator, mixed tech for tools
- Target: Windows primary, Linux secondary

## Code Style

- Follow ESLint + Prettier config
- Use async/await (no callbacks)
- Prefer explicit types over inference in function signatures
- All code and comments in English

## Architecture Patterns

- Tools communicate via JSON input/output
- Config stored in ~/.m-control/config.json
- Command registry in src/commands/index.ts
- All tools in src/commands/<category>/<tool-name>.ts

## When Implementing Commands

1. Add to command registry (src/commands/index.ts)
2. Create handler in appropriate category folder
3. Export async function
4. Handle errors gracefully (try-catch with user-friendly messages)
5. Use config manager for credentials

## Testing Checklist

- Works via interactive mode (mctl/mm)
- Works via direct call (mctl <command>)
- Handles missing config gracefully
- --help shows correct info

## Don't

- Don't hardcode paths (use config or path.join)
- Don't commit secrets (config.json is gitignored)
- Don't use console.log for errors (use console.error)
- Don't block on synchronous I/O in commands
